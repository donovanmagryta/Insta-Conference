<!DOCTYPE html>
<html>
<style>
video {
  width: 40%;
  border-radius:15px;
  margin: 5px 10px;
}
</style>
<body>

<h1>Instant Call</h1>
 <input type="file" onchange="sendy()"/> 


<script src="https://rtcmulticonnection.herokuapp.com/dist/RTCMultiConnection.min.js"></script>
<script src="https://rtcmulticonnection.herokuapp.com/socket.io/socket.io.js"></script>
 <script src="https://cdn.webrtc-experiment.com:443/FileBufferReader.js"></script>
<script>
  // Let's check if the browser supports notifications
  if (!("Notification" in window)) {
    alert("This browser does not support desktop notification");
  }

  // Let's check whether notification permissions have already been granted
  //else if (Notification.permission === "granted") {
    
   // var notification = new Notification("Hi there!");
    // If it's okay let's create a notification
  //}

  // Otherwise, we need to ask the user for permission
  else if (Notification.permission !== "denied") {
    Notification.requestPermission(function (permission) {
      // If the user accepts, let's create a notification
     // if (permission === "granted") {
        
     // }
    });
  }

  // At last, if the user has denied notifications, and you 
  // want to be respectful there is no need to bother them any more.
  

var connection = new RTCMultiConnection();

// this line is VERY_important
connection.socketURL = 'https://rtcmulticonnection.herokuapp.com:443/';
connection.autoSaveToDisk = true;
connection.enableFileSharing = true;

// all below lines are optional; however recommended.

connection.session = {
    audio: true,
    video: true,
    data:   true
    //screen: true,
    //oneway: true
};


connection.sdpConstraints.mandatory = {
    OfferToReceiveAudio: true,
    OfferToReceiveVideo: true
};

connection.onstream = function(event) {
    document.body.appendChild( event.mediaElement );
  //var notification = new Notification("New Call!");
};

var predefinedRoomId = prompt('Please enter room-id', 'xyzxyzxyz');
  
connection.openOrJoin(predefinedRoomId);
  
function sendy() {
document.querySelector('input[type=file]').onchange = function() {
    connection.send(this.files[0]);
};
};
  
if (connection.newParticipant === true) {
  var notification = new Notification("New Call!");
};
 
</script>
</body>
</html>
